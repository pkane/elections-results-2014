<% if (race.key === 'initiatives') { %>

    <% if (!state) { %>
    <div class="row house-card-deck">    
        <% _.each(data, function(s) { %>

            <a href="#<%= race.key %>-<%= getStateById(s.id).abbr %>">
                <div class="col-xs-4 col-sm-3 col-md-2 col-lg-2 card-item">
                    <div class='card-item-inner'>
                        <%= s.name %>
                        <div class="num-races"><%= s.initiatives.length %></div> initiatives                        
                    </div>
                </div>
            </a>
        <% }); %>
    </div>
    <% } else { %>
        <div class="row-fluid">
        <% _.each(detail, function(value) { %>
            <table class="result-item">
                <thead>
                    <tr class="result-first-row">
                        <th class="district-name" colspan="3">
                            <a href="#/race/<%= race.key %>-<%= state.abbr %>-<%= value.id %>">
                                <%= value.name %>
                            </a>
                        </th>
                    </tr>
                </thead>
                <tbody>
                <% _.each(value.results, function(item) { %>
                    <tr class="initiatives">
                        <td class="initiative-name"><%= item.name %></td>
                        <td class="result-votes"><%= item.votes %></td>
                        <td class="result-pct"><%= Math.round(item.pct) %>%</td>
                    </tr>
                <% }); %>
                </tbody>
            </table>
        <% }); %>
        </div>
    <% } %>

<% } else if (race.key === 'house') { %>

    <% if (!state) { %>
        <div class="row house-card-deck">
            <% _.each(_.chain(data).keys().sortBy(function (id) { return parseInt(id); }).value(), function(stateId) { %>
                <a href="#<%= race.key %>-<%= getStateById(stateId).abbr %>">
                    <div class="col-xs-4 col-sm-3 col-md-2 col-lg-2 card-item">
                        <div class='card-item-inner'>
                            <%= getStateById(stateId).display %>
                            <div class="num-races"><%= data[stateId].length %></div>races
                        </div>
                    </div>
                </a>
            <% }); %>
        </div>
    <% } else { %>

        <div class="row-fluid">
        <% _.each(_.sortBy(detail, function (value) { return parseInt(tokenizeHouseId(value.id)); }), function(value) { %>
            <table class="result-item house-item">
                <thead>
                    <tr class="result-first-row">
                    <th class="district-name">
                        <a href="#/race/<%= race.key %>-<%= state.abbr %>-<%= tokenizeHouseId(value.id) %>">
                            <%= formatHouseId(value.id) %>
                        </a>
                    </th>
                    <th class="reporting" colspan="2"><%= Math.round(parseFloat(value.precincts.pct)*100)/100 %>% reporting</th>
                </tr>
                </thead>
                <tbody>
                <% _.each(value.results, function(item) { %>
                    <% var pctVotes = Math.round(parseFloat(item.votes/value.votes)*100); %>
                    <tr class="candidate <%= item.party.toLowerCase() %>">
                        <td class="result-name"><%= item.name %> <%= item.party.charAt(0) %></td>                    
                        <td class="result-votes" style='background-size: <%= pctVotes %>% 100%;'>
                            <%= item.votes %> 
                        </td>
                        <td class="result-win"><%= Math.round(parseFloat(item.votes/value.votes)*10000)/100 %>%</td>                              
                    </tr>
                <% }); %>
                </tbody>
            </table>
        <% }); %>      
        </div>
    <% } %>
<% } else if (race.key === 'senate' || race.key === 'governors') { %>
<div class="row">
    <% _.each(!state ? data : detail, function(value) { %>
        <table class="result-item senate-item">
            <thead>
                <tr class="result-first-row">
                    <th class="district-name" colspan="3" data-href=
                        <% if (!state) { %>
                            '#/<%= race.key %>-<%= getStateByName(value.name).abbr %>'
                        <% } else { %>
                            '#/<%= race.key %>-<%= state.abbr %>'
                        <% } %>
                        >
                        <%= value.name %><%= getCountyByFips(value.id) %>
                    </th>
                </tr>
            </thead>
            <tbody>
            <% _.each(value.results, function(item) { %>
                <% var pctVotes = Math.round(parseFloat(item.votes/value.votes)*100); %>
                <tr class="candidate <%= item.party.toLowerCase() %><% if (item.win) { %> winner <% } %>">
                    <td class="result-name"><span></span><%= item.name %> <%= item.party.charAt(0) %></td>                    
                    <td class="result-votes" style='background-size: <%= pctVotes %>% 100%;'>
                        <%= item.votes %> 
                    </td>
                    <td class="result-win"><%= pctVotes %>%</td>
                </tr>
            <% }); %>
            </tbody>
        </table>
    <% }); %>
</div>

<% } %>